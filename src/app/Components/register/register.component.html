<div class="register-page d-flex min-vh-100">
  <!-- Left: Visual -->
  <div class="register-visual">
    <img src="assets/images/register.png" alt="Register Visual" class="register-bg" />
  </div>

  <!-- Right: Form -->
  <div class="register-content d-flex align-items-center justify-content-center">
    <div class="register-form w-100" style="max-width: 450px; position: relative">
      <div class="text-center mb-4">
        <img src="assets/images/logo.png" alt="Logo" class="register-logo mb-3" />
        <h2 class="fw-bold main-title">{{ "REGISTER.TITLE" | translate }}</h2>
      </div>

      <!-- Error -->
      <div *ngIf="errorMessage" class="alert alert-danger text-center py-2 mb-3">
        <i class="bi bi-exclamation-triangle me-2"></i>
        {{ errorMessage }}
      </div>

      <!-- Success -->
      <div *ngIf="successMessage" class="alert alert-success text-center py-2 mb-3">
        <i class="bi bi-check-circle me-2"></i>
        {{ successMessage }}
      </div>

      <!-- Form -->
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">

        <!-- Full Name -->
        <div class="mb-3">
          <label class="form-label">{{ "REGISTER.FULLNAME" | translate }} *</label>
          <input type="text" formControlName="fullName" class="form-control cool-input"
                 [placeholder]="'REGISTER.FULLNAME_PLACEHOLDER' | translate"
                 [class.is-invalid]="registerForm.get('fullName')?.invalid && registerForm.get('fullName')?.touched"/>
          <div *ngIf="registerForm.get('fullName')?.invalid && registerForm.get('fullName')?.touched"
               class="text-danger small mt-1">
            {{ "REGISTER.FULLNAME_MIN_ERROR" | translate }}
          </div>
        </div>

        <!-- Username -->
        <div class="mb-3">
          <label class="form-label">{{ "REGISTER.USERNAME" | translate }} *</label>
          <input type="text" formControlName="userName" class="form-control cool-input"
                 [placeholder]="'REGISTER.USERNAME_PLACEHOLDER' | translate"
                 [class.is-invalid]="registerForm.get('userName')?.invalid && registerForm.get('userName')?.touched"/>
          <div *ngIf="registerForm.get('userName')?.invalid && registerForm.get('userName')?.touched"
               class="text-danger small mt-1">
            {{ "REGISTER.USERNAME_MIN_ERROR" | translate }}
          </div>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label class="form-label">{{ "REGISTER.EMAIL" | translate }} *</label>
          <input type="email" formControlName="email" class="form-control cool-input"
                 [placeholder]="'REGISTER.EMAIL_PLACEHOLDER' | translate"
                 [class.is-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"/>
          <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
               class="text-danger small mt-1">
            {{ "REGISTER.EMAIL_INVALID" | translate }}
          </div>
        </div>

        <!-- Contact Info -->
        <div class="mb-3">
          <label class="form-label">{{ "REGISTER.CONTACT_INFO" | translate }}</label>
          <input type="text" formControlName="contactInfo" class="form-control cool-input"
                 [placeholder]="'REGISTER.CONTACT_PLACEHOLDER' | translate"
                 [class.is-invalid]="registerForm.get('contactInfo')?.invalid && registerForm.get('contactInfo')?.touched"/>
          <div *ngIf="registerForm.get('contactInfo')?.invalid && registerForm.get('contactInfo')?.touched"
               class="text-danger small mt-1">
            {{ "REGISTER.CONTACT_MIN_ERROR" | translate }}
          </div>
        </div>

        <!-- Password -->
        <div class="mb-3">
          <label class="form-label">{{ "REGISTER.PASSWORD" | translate }} *</label>
          <input type="password" formControlName="password" class="form-control cool-input"
                 [placeholder]="'REGISTER.PASSWORD_PLACEHOLDER' | translate"
                 [class.is-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"/>
          <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
               class="text-danger small mt-1">
            {{ "REGISTER.PASSWORD_MIN_ERROR" | translate }}
          </div>
        </div>

        <!-- Confirm Password -->
        <div class="mb-3">
          <label class="form-label">{{ "REGISTER.CONFIRM_PASSWORD" | translate }} *</label>
          <input type="password" formControlName="confirmPassword" class="form-control cool-input"
                 [placeholder]="'REGISTER.CONFIRM_PASSWORD_PLACEHOLDER' | translate"
                 [class.is-invalid]="registerForm.get('confirmPassword')?.errors?.['mismatch']"/>
          <div *ngIf="registerForm.get('confirmPassword')?.errors?.['mismatch']"
               class="text-danger small mt-1">
            {{ "REGISTER.PASSWORD_MISMATCH" | translate }}
          </div>
        </div>

        <!-- Role -->
        <div class="mb-3">
          <label class="form-label">{{ "REGISTER.ROLE" | translate }} *</label>
          <select formControlName="role" class="form-select cool-input"
                  [class.is-invalid]="registerForm.get('role')?.invalid && registerForm.get('role')?.touched">
            <option value="">{{ "REGISTER.ROLE_SELECT" | translate }}</option>
            <option value="student">{{ "REGISTER.ROLE_STUDENT" | translate }}</option>
            <option value="teacher">{{ "REGISTER.ROLE_TEACHER" | translate }}</option>
            <option value="parent">{{ "REGISTER.ROLE_PARENT" | translate }}</option>
          </select>
          <div *ngIf="registerForm.get('role')?.invalid && registerForm.get('role')?.touched"
               class="text-danger small mt-1">
            {{ "REGISTER.ROLE_REQUIRED" | translate }}
          </div>
        </div>

        <!-- Parent-specific fields -->
        <div *ngIf="registerForm.get('role')?.value === 'parent'" class="parent-section border rounded p-3 bg-light mb-3">
          <h6 class="mb-3 text-primary">
            <i class="bi bi-person-badge me-2"></i>
            {{ "REGISTER.PARENT_INFO" | translate }}
          </h6>

          <!-- Relation -->
          <div class="mb-3">
            <label class="form-label">{{ "REGISTER.RELATION" | translate }} *</label>
            <select formControlName="relation" class="form-select cool-input"
                    [class.is-invalid]="registerForm.get('relation')?.invalid && registerForm.get('relation')?.touched">
              <option value="">{{ "REGISTER.RELATION_SELECT" | translate }}</option>
              <option value="father">{{ "REGISTER.RELATION_FATHER" | translate }}</option>
              <option value="mother">{{ "REGISTER.RELATION_MOTHER" | translate }}</option>
              <option value="guardian">{{ "REGISTER.RELATION_GUARDIAN" | translate }}</option>
              <option value="other">{{ "REGISTER.RELATION_OTHER" | translate }}</option>
            </select>
            <div *ngIf="registerForm.get('relation')?.invalid && registerForm.get('relation')?.touched"
                 class="text-danger small mt-1">
              {{ "REGISTER.RELATION_REQUIRED" | translate }}
            </div>
          </div>
        </div>

        <!-- Submit -->
        <div class="d-grid gap-2">
          <button class="btn btn-primary btn-lg" type="submit" [disabled]="isLoading || registerForm.invalid">
            <ng-container *ngIf="isLoading">
              <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
              {{ "REGISTER.LOADING" | translate }}
            </ng-container>
            <ng-container *ngIf="!isLoading">
              <i class="bi bi-person-plus me-2"></i>
              {{ "REGISTER.SUBMIT" | translate }}
            </ng-container>
          </button>

          <button type="button" class="btn btn-outline-secondary" (click)="onCancel()" [disabled]="isLoading">
            <i class="bi bi-x-circle me-2"></i>
            {{ "REGISTER.CANCEL" | translate }}
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
