<div class="container mt-4">
  <div *ngIf="successMessage" class="alert alert-success text-center">
    {{ successMessage }}
  </div>
  <div class="d-flex justify-content-between align-items-center">
    <h3>All Classes</h3>

    <!-- Create Class Button -->
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createClassModal">
      {{"DASH.CREATE_EMPTY_CLASS" | translate}}
    </button>
  </div>
  <hr />

  <!-- If no classes -->
  <div *ngIf="allClasses.length === 0" class="alert alert-info">
    No classes available.
  </div>

  <!-- Classes Table -->
  <div *ngIf="allClasses.length > 0" class="table-responsive mt-3">
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Class Year</th>
          <th>Class Name</th>
          
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let c of allClasses; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ c.classYear }}</td>
          <td>{{ c.className }}</td>

          
          <td>
          <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#assignTeacherModal"
            (click)="openAssignTeacherModal(c.id)">
            Assign Teacher
          </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>



<!-- ========================= -->
<!-- Create Class Modal -->
<!-- ========================= -->
<div class="modal fade" id="createClassModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Create New Class</h5>
        <button class="btn-close" data-bs-dismiss="modal">{{"DASH.CREATE_EMPTY_CLASS" | translate}}</button>
      </div>

      <div class="modal-body">
        <form #classForm="ngForm">

          <!-- Class Year -->
          <div class="mb-3">
            <label class="form-label">Class Year</label>
            <input type="text" class="form-control" [(ngModel)]="newClass.classYear" name="classYear" required />
          </div>

          <!-- Class Name -->
          <div class="mb-3">
            <label class="form-label">Class Name</label>
            <input type="text" class="form-control" [(ngModel)]="newClass.className" name="className" required />
          </div>

        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn-success" (click)="createClass()" [disabled]="!newClass.className || !newClass.classYear">
          Save
        </button>
      </div>

    </div>
  </div>
</div>

<!-- ========================= -->
<!-- Assign Teacher Modal -->
<!-- ========================= -->
<div class="modal fade" id="assignTeacherModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Assign Teacher</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <!-- No Teachers -->
        <div *ngIf="allTeachers.length === 0" class="alert alert-warning">
          No teachers available.
        </div>

        <!-- Teachers Table -->
        <table *ngIf="allTeachers.length > 0" class="table table-bordered table-striped">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Class Name</th>
              <th>Select</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let t of allTeachers; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ t.fullName }}</td>
              <td>{{ t.classNames }}</td>

              <td>
                <button class="btn btn-success btn-sm" (click)="selectTeacher(t.id)">
                  Choose
                </button>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

    </div>
  </div>
</div>