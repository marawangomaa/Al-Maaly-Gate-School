<div class="container mt-4 teacher-page">

  <!-- Header -->
  <div class="page-header mb-4">
    <h2 class="fw-bold">Teacher Management</h2>
    <p class="text-muted">Manage teachers, search by subject, and review approvals.</p>
  </div>

  <!-- Overview Card -->
  <div class="summary-card shadow-sm p-3 mb-4 rounded">
    <div class="d-flex align-items-center">
      <div class="icon-box me-3">
        <i class="fas fa-users fa-2x text-primary"></i>
      </div>
      <div>
        <h5 class="mb-0">Total Teachers</h5>
        <h3 class="fw-bold mt-1">{{ teacherCount }}</h3>
      </div>
    </div>
  </div>

  <!-- Search Section -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">

      <h4 class="card-title mb-3">Search Teachers by Subject</h4>

      <form (ngSubmit)="LoadTeachersBySubjectName()" #searchForm="ngForm">
        <div class="input-group mb-3">
          <input type="text" name="subjectName" [(ngModel)]="subjectName"
                 class="form-control" placeholder="Enter subject name..." />
          <button type="submit" class="btn btn-primary">Search</button>
        </div>
      </form>

      <!-- Search Hints / Alerts -->
      <div *ngIf="!subjectName && !hasSearched" class="alert alert-secondary">
        Enter a subject name to search for teachers.
      </div>

      <div *ngIf="subjectName && !hasSearched" class="alert alert-info">
        Press <strong>Search</strong> to find teachers for "<strong>{{ subjectName }}</strong>".
      </div>

      <!-- Search Results -->
      <div *ngIf="hasSearched">
        <ng-container *ngIf="teachersBySubject.length > 0; else noResults">
          <h5 class="mt-3">Results for "<strong>{{ subjectName }}</strong>"</h5>

          <div class="list-group mt-3">
            <div class="list-group-item teacher-item" *ngFor="let teacher of teachersBySubject">
              <h6 class="fw-bold mb-1">{{ teacher.fullName }}</h6>
              <div>Email: {{ teacher.email }}</div>
              <div *ngIf="teacher.contactInfo">Contact: {{ teacher.contactInfo }}</div>
              <div>Status: {{ teacher.profileStatus }}</div>
            </div>
          </div>
        </ng-container>

        <ng-template #noResults>
          <p class="text-danger mt-2">No teachers found for "<strong>{{ subjectName }}</strong>".</p>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- All Teachers Table -->
  <div class="card shadow-sm">
    <div class="card-body">

      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="card-title">All Teachers</h4>

        <button class="btn btn-outline-primary btn-sm">
          <i class="fas fa-plus"></i> Add New Teacher
        </button>
      </div>

      <div *ngIf="allTeachers.length > 0; else noData">
        <table class="table table-hover table-striped align-middle">
          <thead class="table-primary">
            <tr>
              <th>#</th>
              <th>Full Name</th>
              <th>Email</th>
              <th>Contact</th>
              <th>Status</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let teacher of allTeachers; index as i">
              <td>{{ i + 1 }}</td>
              <td class="fw-semibold">{{ teacher.fullName }}</td>
              <td>{{ teacher.email }}</td>
              <td>{{ teacher.contactInfo || '-' }}</td>
              <td>
                <span class="badge"
                  [ngClass]="{
                    'bg-success': teacher.profileStatus === 'Approved',
                    'bg-warning text-dark': teacher.profileStatus === 'Pending',
                    'bg-danger': teacher.profileStatus === 'Rejected'
                  }">
                  {{ teacher.profileStatus }}
                </span>
              </td>
              <td class="text-center">
                <button *ngIf="teacher.profileStatus !== 'Approved'"
                        class="btn btn-success btn-sm me-2"
                        (click)="ApproveTeacherAction(teacher.id)">
                  Approve
                </button>

                <button *ngIf="teacher.profileStatus !== 'Rejected'"
                        class="btn btn-danger btn-sm"
                        (click)="RejectTeacherAction(teacher.id)">
                  Reject
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <ng-template #noData>
        <p class="text-muted mb-0">No teachers found.</p>
      </ng-template>

    </div>
  </div>
</div>
