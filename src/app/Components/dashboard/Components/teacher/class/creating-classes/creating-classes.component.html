<section class="standard-section-layout create-class">
  <div class="container">
    <h3 class="main-title mb-4">{{ 'CLASSES.CREATE_TITLE' | translate }}</h3>

    <div class="card create-card">
      <form [formGroup]="classForm" (ngSubmit)="createClass()">
        <div class="row g-4">

          <!-- Class -->
          <div class="col-md-4">
            <div class="div-input">
              <label for="classId">{{ 'CLASSES.TABLE.CLASS' | translate }}</label>
              <select
                id="classId"
                formControlName="classId"
                [class.invalid]="f.classId.touched && f.classId.invalid"
              >
                <option value="" disabled selected>
                  {{ 'CLASSES.FORM.PLACEHOLDERS.CLASS' | translate }}
                </option>
                <option *ngFor="let c of classes" [value]="c.id">
                  {{ c.className }} - {{ c.classYear }}
                </option>
              </select>
              <small *ngIf="f.classId.touched && f.classId.invalid" class="error-text">
                {{ 'CLASSES.FORM.ERRORS.CLASS_REQUIRED' | translate }}
              </small>
            </div>
          </div>

          <!-- Subject -->
          <div class="col-md-4">
            <div class="div-input">
              <label for="subjectId">{{ 'CLASSES.FORM.SUBJECT' | translate }}</label>
              <select
                id="subjectId"
                formControlName="subjectId"
                [class.invalid]="f.subjectId.touched && f.subjectId.invalid"
              >
                <option value="" disabled selected>
                  {{ 'CLASSES.FORM.PLACEHOLDERS.SUBJECT' | translate }}
                </option>
                <option *ngFor="let s of subjects" [value]="s.id">
                  {{ s.subjectName }}
                </option>
              </select>
              <small *ngIf="f.subjectId.touched && f.subjectId.invalid" class="error-text">
                {{ 'CLASSES.FORM.ERRORS.SUBJECT_REQUIRED' | translate }}
              </small>
            </div>
          </div>

          <!-- Meeting Link -->
          <div class="col-md-4">
            <div class="div-input">
              <label for="link">{{ 'CLASSES.FORM.MEETING_LINK' | translate }}</label>
              <input
                id="link"
                type="url"
                formControlName="link"
                [class.invalid]="f.link.touched && f.link.invalid"
                placeholder="https://..."
              />
              <small *ngIf="f.link.touched && f.link.invalid" class="error-text">
                Meeting link invalid
              </small>
            </div>
          </div>

          <!-- Start Time -->
          <div class="col-md-4">
            <div class="div-input">
              <label for="startTime">{{ 'CLASSES.FORM.START_TIME' | translate }}</label>
              <input
                id="startTime"
                type="datetime-local"
                formControlName="startTime"
              />
            </div>
          </div>

          <!-- Duration -->
          <div class="col-md-4">
            <div class="div-input">
              <label for="duration">{{ 'CLASSES.FORM.DURATION' | translate }}</label>
              <input
                id="duration"
                type="number"
                formControlName="duration"
                placeholder="Duration in minutes"
              />
            </div>
          </div>

        </div>

        <div class="form-actions text-end mt-4">
          <button type="submit" class="primary-btn" [disabled]="classForm.invalid">
            {{ 'CLASSES.FORM.BUTTON.CREATE' | translate }}
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
